## **まずそれぞれの意味（どこが危険か）**

- **translate=(0.1,0.1)**
    
    → 画像の幅/高さの **最大10%** だけ平行移動
    
    → 病変が端にあると **切れる**リスクが増える
    
- **scale=(0.9,1.1)**
    
    → **±10%** の拡大縮小
    
    → 病変のサイズ感を変えすぎると学習がブレる
    
- **shear=5**
    
    → せん断（斜めに潰す/伸ばす）
    
    → 組織パターンが **不自然に歪む**ことがある（医療では慎重）
    

---

# **どこまで弱める？（おすすめの目安）**

  

## **無難な “医療画像寄り” の範囲**

- **translate**：0.02〜0.05
    
- **scale**：(0.95, 1.05)（強くても (0.9, 1.1) まで）
    
- **shear**：0〜3（まず0でもOK）
    

  

### **例：まず試すならこれ（おすすめ）**

```
transforms.RandomAffine(
    degrees=0,
    translate=(0.05, 0.05),
    scale=(0.95, 1.05),
    shear=2
)
```

---

# **もう一段 “安全側” に寄せるなら**

  

（病変が小さい / 端に出やすい / 画像がすでに整っている場合）

```
transforms.RandomAffine(
    degrees=0,
    translate=(0.02, 0.02),
    scale=(0.98, 1.02),
    shear=0
)
```

# **どう判断すればいい？（基準）**

  

次の観点で決めるのが一番ミスりません。

  

## **① 病変が「小さい」ほど弱める**

  

小さい病変は、translate や crop で簡単に消えるので

- translate は **0.02〜0.03** 推奨
    

  

## **② 画像の切り出しが “もうROI” なら弱める**

  

すでに病変中心に切り出されているなら

- 強い拡張は逆に邪魔になることが多い
    

  

## **③ 施設差/撮影差が大きいなら少し強めてもOK**

  

ドメインギャップ対策として

- translate 0.05
    
- scale 0.95–1.05
    
    くらいは意味がある
    

---

# **重要：いまの構成だと「Cropとtranslateが二重」に効いてる**

  

あなたはすでに

- RandomCrop(224)（位置ズレ）
    
- RandomAffine translate（さらに位置ズレ）
    

  

を両方入れてるので、**合算でズレが大きくなりがち**です。

  

👉 だから設計としては

- 位置ズレは **Cropで担保する**なら translate は弱め
    
- translate を効かせたいなら Crop を CenterCrop寄りに
    

  

のどちらかに寄せるのが安定します。

---

# **おすすめの決め打ち（まず1個選ぶなら）**

  

あなたの現在のパイプライン（RandomCropあり）前提なら、私はこれを推します：

```
transforms.RandomAffine(
    degrees=0,
    translate=(0.03, 0.03),
    scale=(0.95, 1.05),
    shear=1
)
```

- translate を抑えて「病変が消える」事故を減らす
    
- scale はそこそこ残して汎化を確保
    
- shear は最小限（0でも良い）
    

---

もし「病変が端に寄ってる画像が多い」「Cropで病変を切ってる疑いがある」なら、次は **Crop戦略（RandomCrop→RandomResizedCrop or CenterCrop）**から見直す方が効きます。